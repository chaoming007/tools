var weiXinShareJs=function(options,jsdata){this.init();this.pageShareContent=this.extend({desc:'易车网-买车无难事',imgUrl:'http://image.bitautoimg.com/2016/pc1200/img/wxyiche-logo.png'},options);var jsdataSetting={url:'http://mps.yiche.com/weixin/weixinconfig',data:{url:"http://"+window.location.hostname+window.location.pathname+window.location.search},callback:'wxs_js.fweixin',success:function(data){}};var jsShareContent=this.extend(jsdataSetting,jsdata);this.Jsonp(jsShareContent)};weiXinShareJs.prototype.init=function(){var isInWeixinNavigator=navigator.userAgent.match(/MicroMessenger/ig);if(isInWeixinNavigator){document.write(unescape('%3Cscript type="text/javascript" src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"%3E%3C/script%3E'))}else{};this.forweixinObj={debug:false,appId:'wx0c56521d4263f190',jsApiList:['checkJsApi','onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo']}};weiXinShareJs.prototype.extend=function(){var _extend=function me(dest,source){for(var name in dest){if(dest.hasOwnProperty(name)){if((dest[name]instanceof Object)&&(source[name]instanceof Object)){me(dest[name],source[name])}if(source.hasOwnProperty(name)){continue}else{source[name]=dest[name]}}}};var _result={},arr=arguments;if(!arr.length){return{}}for(var i=arr.length-1;i>=0;i-=1){_extend(arr[i],_result)}arr[0]=_result;return _result};weiXinShareJs.prototype.readyAndConfigWeixin=function(forweixinObj){var pageShareContent=this.pageShareContent;if(forweixinObj&&(typeof wx=='object')){wx.config({debug:forweixinObj.debug,appId:forweixinObj.appId,timestamp:forweixinObj.timestamp,nonceStr:forweixinObj.nonceStr,signature:forweixinObj.signature,jsApiList:forweixinObj.jsApiList});wx.ready(function(){wx.checkJsApi({jsApiList:['checkJsApi','onMenuShareTimeline','onMenuShareAppMessage','onMenuShareQQ','onMenuShareWeibo'],success:function(res){}});wx.onMenuShareAppMessage({title:pageShareContent.title,desc:pageShareContent.desc,link:pageShareContent.link,imgUrl:pageShareContent.imgUrl });wx.onMenuShareTimeline({title:pageShareContent.title,link:pageShareContent.link,imgUrl:pageShareContent.imgUrl });wx.onMenuShareQQ({title:pageShareContent.title,desc:pageShareContent.desc,link:pageShareContent.link,imgUrl:pageShareContent.imgUrl });wx.onMenuShareWeibo({title:pageShareContent.title,desc:pageShareContent.desc,link:pageShareContent.link,imgUrl:pageShareContent.imgUrl })});}};weiXinShareJs.prototype.formatParams=function(data){var arr=[];for(var name in data){arr.push(encodeURIComponent(name)+'='+encodeURIComponent(data[name]))}return arr.join('&')};weiXinShareJs.prototype.Jsonp=function(options){var forweixinObj=this.forweixinObj;var oHead=document.getElementsByTagName('head')[0];var params="";var key='callback';if(options.data){options.data[key]=options.callback;params+=this.formatParams(options.data)}else{params+=key+"="+options.callback}var oS=document.createElement('script');oHead.appendChild(oS);oS.src=options.url+'?'+params};weiXinShareJs.prototype.fweixin=function(data){var forweixinObj=this.forweixinObj;if(typeof forweixinObj=='undefined'){window.forweixinObj={}}forweixinObj.timestamp=data["yiche.timestamp"];forweixinObj.nonceStr=data["yiche.nonceStr"];forweixinObj.signature=data["yiche.signature"];this.readyAndConfigWeixin(forweixinObj)};var wxs_js=new weiXinShareJs();